"use strict";!function(){var version="v1.2.3::",staticCacheName="static",pagesCacheName="pages",assetsCacheName="assets",updateStaticCache=function(){return caches.open("v1.2.3::static").then((function(cache){return cache.addAll(["./offline/"])}))},stashInCache=function(cacheName,request,response){caches.open(cacheName).then((function(cache){cache.put(request,response)}))},trimCache=function(cacheName,maxItems){caches.open(cacheName).then((function(cache){cache.keys().then((function(keys){keys.length>maxItems&&cache.delete(keys[0]).then(trimCache(cacheName,maxItems))}))}))},clearOldCaches=function(){return caches.keys().then((function(keys){return Promise.all(keys.filter((function(key){return 0!==key.indexOf(version)})).map((function(key){return caches.delete(key)})))}))};self.addEventListener("install",(function(event){event.waitUntil(updateStaticCache().then((function(){return self.skipWaiting()})))})),self.addEventListener("activate",(function(event){event.waitUntil(clearOldCaches().then((function(){return self.clients.claim()})))})),self.addEventListener("message",(function(event){"trimCaches"===event.data.command&&(trimCache("v1.2.3::pages",40),trimCache("v1.2.3::assets",40))})),self.addEventListener("fetch",(function(event){var request=event.request;if("GET"===request.method){if(-1!==request.headers.get("Accept").indexOf("text/html"))return"navigate"!==request.mode&&(request=new Request(request.url,{method:"GET",headers:request.headers,mode:request.mode,credentials:request.credentials,redirect:request.redirect})),void event.respondWith(fetch(request).then((function(response){var copy=response.clone(),cacheName;return stashInCache("v1.2.3::pages",request,copy),response})).catch((function(){return caches.match(request).then((function(response){return response||caches.match("./offline/")}))})));var requesturl,domainstring=request.url.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0];"google.com"!==domainstring&&"gstatic.com"!==domainstring&&"google-analytics.com"!==domainstring&&"googletagmanager.com"!==domainstring&&"youtube.com"!==domainstring&&"cookiehub.net"!==domainstring&&event.respondWith(caches.match(request).then((function(response){return response||fetch(request).then((function(response){if(-1===request.headers.get("Accept").indexOf("text/html")){var copy=response.clone(),cacheName;stashInCache("v1.2.3::assets",request,copy)}return response})).catch((function(){if(-1!==request.headers.get("Accept").indexOf("image"))return new Response('<svg role="img" aria-labelledby="offline-title" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg"><title id="offline-title">Offline</title><g fill="none" fill-rule="evenodd"><path fill="#D8D8D8" d="M0 0h400v300H0z"/><text fill="#9B9B9B" font-family="Helvetica Neue,Arial,Helvetica,sans-serif" font-size="72" font-weight="bold"><tspan x="93" y="172">offline</tspan></text></g></svg>',{headers:{"Content-Type":"image/svg+xml"}})}))})))}else event.respondWith(fetch(request).catch((function(){return caches.match("./offline/")})))}))}();
//# sourceMappingURL=serviceworker-cache.min.js.map